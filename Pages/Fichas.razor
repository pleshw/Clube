@page "/fichas"
@using Clube.Data.RPG;
@using System.ComponentModel.DataAnnotations;

<PageTitle>Bem Vindo</PageTitle>

<div class="row">
    <div class="col-8">
        @if (MainPlayer != null)
        {
            <div class="bg-white container row shadow border-dark justify-content-center px-0 py-0 my-0">
                <div class="row px-0 py-0 w-100 justify-content-center border-2 border-bottom">
                    <ProfileHeader Player="@MainPlayer"></ProfileHeader>
                </div>
                <div class="row py-4 px-5">
                    <div class="row col-12">
                        <div class="col-7 row justify-content-center py-3 px-0">
                            <div class="row col-12">
                                <ProfileAttributes Player="@MainPlayer"></ProfileAttributes>
                            </div>
                        </div>
                        <div class="col-5">
                            <ProfileNotes></ProfileNotes>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="col-3 row justify-content-around container-fluid">
        <div class="row col-12" style="height: fit-content;">
            <div class="col-12 row justify-content-center align-items-center" style="height: 200px;">
                <div class="col-8 row justify-content-center mb-1">
                    <button @onclick="ResetPlayer" style="height: 40px;" class="btn btn-dark">Nova Ficha</button>
                </div>
                <div class="col-8 row justify-content-center mb-5">
                    <button @onclick="ResetPlayer" style="height: 40px;" class="btn btn-dark">Salvar Ficha</button>
                </div>
            </div>
            <div class="col-10">
                <div class="accordion border-0 shadow" id="accordionHeaderFichas">
                    <div class="accordion-item border-0">
                        <h2 class="accordion-header border-0">
                            <button class="accordion-button rounded-0 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDiceRolls" aria-expanded="true" aria-controls="collapseDiceRolls">
                                Rolar Dados
                            </button>
                        </h2>
                        <div id="collapseDiceRolls" class="accordion-collapse collapse" data-bs-parent="#accordionHeaderFichas">
                            <div class="accordion-body border-0 p-0">
                                <RollDiceMenu></RollDiceMenu>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@code {
    Player MainPlayer = Player.GetEmpty();

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    public void ResetPlayer()
    {
        MainPlayer = Player.GetEmpty();
        StateHasChanged();
    }
}